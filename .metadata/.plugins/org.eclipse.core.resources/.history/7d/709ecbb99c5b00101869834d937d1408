package pl.edu.pjwstk.s8267.GUI.Lab5;

import java.util.Calendar;
import java.util.GregorianCalendar;
import java.util.Iterator;

public class DaysToRemember implements Iterable<Calendar>, Iterator<Calendar> {
	private Calendar c;
	private int day;

	public DaysToRemember(int day, int month, int year) {
		c = new GregorianCalendar(year, month, 0);
		this.day = day;
	}

	public void setDayWeek(int day) {
		this.day = day;
		c.set(Calendar.DAY_OF_MONTH, 0);
	}

	@Override
	public boolean hasNext() {
		Calendar tmp = c;
		tmp.set(Calendar.DAY_OF_WEEK, day);
		tmp.roll(Calendar.WEEK_OF_YEAR, true);
		if(tmp.get(Calendar.MONTH) == c.get(Calendar.MONTH)) {
			c = tmp;
			return true;
		}
		return false;
	}

	@Override
	public Calendar next() {
		return c;
	}

	@Override
	public void remove() {

	}

	@Override
	public Iterator<Calendar> iterator() {
		return this;
	}

	public static void main(String[] args) {
		DaysToRemember notForget = new DaysToRemember(Calendar.SUNDAY, 3, 2011);
		System.out.println("Hipotetycznie wolne: \n");
		for (Calendar a : notForget)
			System.out.printf("%1$td.%1$tm.%1$tY\n", a);

		notForget.setDayWeek(Calendar.MONDAY);
		System.out.println("\nGUI: \n");
		for (Calendar a : notForget)
			System.out.printf("%1$td.%1$tm.%1$tY\n", a);

		notForget.setDayWeek(Calendar.TUESDAY);
		System.out.println("\nnot GUI: \n");
		for (Calendar a : notForget)
			System.out.printf("%1$td.%1$tm.%1$tY\n", a);

		notForget.setDayWeek(Calendar.THURSDAY);
		System.out.println("\nMa≈Çy piatek: \n");
		for (Calendar a : notForget)
			System.out.printf("%1$td.%1$tm.%1$tY\n", a);

		notForget.setDayWeek(Calendar.FRIDAY);
		System.out.println("\nPiatek: \n");
		for (Calendar a : notForget)
			System.out.printf("%1$td.%1$tm.%1$tY\n", a);
	}
}
