package pl.edu.pjwstk.s8267.GUI.Lab4;

import java.util.Iterator;
import java.util.NoSuchElementException;

public class MySimpleIterator implements Iterable<Integer>, Iterator<Integer> {

	public static final int PRIME_NUMBERS = 1;
	public static final int ODD_NUMBERS = 2;
	public static final int EVEN_NUMBERS = 3;
	private int from;
	private int to;
	private int type;
	private int last;

	public MySimpleIterator(int from, int to, int type) {
		this.from = from;
		this.to = to;
		this.type = type;
		last = from-1;
	}

	@Override
	public Iterator<Integer> iterator() {
		return this;
	}

	@Override
	public boolean hasNext() {
		int next = last;
		switch(type) {
		case PRIME_NUMBERS:
			next:for(int x = last; x < to; x++) {
				for(int y = 2; y < x; y++) {
					if(x%y == 0) continue next;
				}
				next = x;
				break;
			}
			break;
		case ODD_NUMBERS:
			if(last % 2 == 1)
				next += 2;
			else
				next += 1;
			break;
		case EVEN_NUMBERS:
			break;
		}
		if(last == next)
			return false;
		else {
			last = next;
			return true;
		}
	}

	@Override
	public Integer next() {
		if (!hasNext())
			throw new NoSuchElementException();
		return last;
	}

	@Override
	public void remove() {

	}

	private void setLimits(int from, int to) {
		this.from = from;
		this.to = to;
		last = from;
	}

	private void setType(int type) {
		this.type = type;
	}

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		MySimpleIterator msi = new MySimpleIterator(10, 100,
				MySimpleIterator.PRIME_NUMBERS);

		for (int el : msi)
			System.out.print(el + " ");
		System.out.println();

		msi.setType(MySimpleIterator.ODD_NUMBERS);
		msi.setLimits(15, 30);
		for (int el : msi)
			System.out.print(el + " ");
		System.out.println();

		msi.setType(MySimpleIterator.EVEN_NUMBERS);
		for (int el : msi)
			System.out.print(el + " ");
		System.out.println();
	}
}
